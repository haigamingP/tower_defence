<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tower Defense JS - Modular</title>
    <link rel="stylesheet" href="style.css">
    <!-- Th√™m FontAwesome cho icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    
    <!-- START SCREEN -->
    <div id="start-screen">
        <div class="start-box">
            <h1>Th·ªß Th√†nh</h1>
            <p>Chi·∫øn thu·∫≠t & Sinh t·ªìn</p>
            
            <div class="start-grid">
                <div class="start-info-box">
                    <h3 class="how-to-play"><i class="fas fa-gamepad"></i> C√°ch ch∆°i</h3>
                    <ul>
                        <li>Click √¥ ƒë·∫•t ƒë·ªÉ <b>X√¢y Th√°p</b></li>
                        <li>N√¢ng c·∫•p th√°p ƒë·ªÉ m·ªü kh√≥a k·ªπ nƒÉng</li>
                        <li>D√πng Skill (Ph√≠m 1-2-3) h·ªó tr·ª£</li>
                    </ul>
                </div>
                <div class="start-info-box">
                    <h3 class="tips"><i class="fas fa-lightbulb"></i> M·∫πo</h3>
                    <ul>
                        <li>Th√°p Ph√©p kh·∫Øc qu√°i Gi√°p cao</li>
                        <li>Th√°p Cung kh·∫Øc qu√°i bay</li>
                        <li>G·ªçi qu√°i s·ªõm ƒë·ªÉ nh·∫≠n th√™m v√†ng</li>
                    </ul>
                </div>
            </div>

            <button id="btn-play-game">
                <i class="fas fa-play"></i> B·∫ÆT ƒê·∫¶U
            </button>
        </div>
    </div>

    <!-- GAME UI (·∫®n ban ƒë·∫ßu) -->
    <div id="game-ui">
        <div id="game-container">
            <canvas id="gameCanvas"></canvas>

            <!-- Stats -->
            <div id="player-stats">
                <div class="stat"><span class="stat-icon">‚ù§Ô∏è</span><span id="lives">20</span></div>
                <div class="stat"><span class="stat-icon">üí∞</span><span id="coins">450</span></div>
                <div class="stat"><span class="stat-icon">üåä</span>Wave: <span id="wave">1</span></div>
            </div>
            
            <!-- Wave Notification -->
            <div id="wave-notification" class="hidden">
                <div class="wave-circle">
                    <div class="wave-icon">üíÄ</div>
                    <div class="wave-timer-bar" id="wave-timer-bar"></div>
                </div>
                <div class="wave-tooltip" id="wave-tooltip">
                    <div id="next-wave-desc">5 S√≥i</div>
                    <div id="wave-bonus-text">Click g·ªçi s·ªõm: +150G</div>
                </div>
            </div>

            <!-- Skill Bar (Bottom Left) -->
            <div id="skill-bar">
                <div class="skill-slot" id="btn-meteor" title="M∆∞a Thi√™n Th·∫°ch (Ph√≠m 1)">
                    ‚òÑÔ∏è
                    <div class="cooldown-overlay" id="cd-meteor"></div>
                    <span class="skill-key">1</span>
                </div>
                <div class="skill-slot" id="btn-reinforce" title="Tri·ªáu H·ªìi L√≠nh (Ph√≠m 2)">
                    üõ°Ô∏è
                    <div class="cooldown-overlay" id="cd-reinforce"></div>
                    <span class="skill-key">2</span>
                </div>
                <div class="skill-slot" id="btn-hero-skill" title="K·ªπ NƒÉng Hero (Ph√≠m 3)">
                    ‚ö°
                    <div class="cooldown-overlay" id="cd-hero-skill"></div>
                    <span class="skill-key">3</span>
                </div>
            </div>

            <!-- Hero Stats Panel (Bottom Right) -->
            <div id="hero-stats" class="hidden">
                <!-- [UPDATED] Th√™m ID v√† Title cho n√∫t ch·ªçn Hero -->
                <div id="btn-select-hero" class="hero-portrait" title="Ch·ªçn Hero (Ph√≠m Space)">ü¶∏‚Äç‚ôÇÔ∏è</div>
                
                <div class="hero-info">
                    <div class="hero-name" id="hero-name-display">Hero Name</div>
                    <div class="hero-hp-bar">
                        <div class="hero-hp-fill" id="hero-hp-fill"></div>
                        <span id="hero-hp-text">100/100</span>
                    </div>
                    <div class="hero-details">
                        <span>‚öîÔ∏è <span id="hero-dmg-display">0</span></span>
                        <span>üõ°Ô∏è <span id="hero-armor-display">LOW</span></span>
                    </div>
                </div>
            </div>

            <!-- Hero Stats Panel (Bottom Right) -->
            <div id="hero-stats" class="hidden">
                <div class="hero-portrait">ü¶∏‚Äç‚ôÇÔ∏è</div>
                <div class="hero-info">
                    <div class="hero-name" id="hero-name-display">Hero Name</div>
                    <div class="hero-hp-bar">
                        <div class="hero-hp-fill" id="hero-hp-fill"></div>
                        <span id="hero-hp-text">100/100</span>
                    </div>
                    <div class="hero-details">
                        <span>‚öîÔ∏è <span id="hero-dmg-display">0</span></span>
                        <span>üõ°Ô∏è <span id="hero-armor-display">LOW</span></span>
                    </div>
                </div>
            </div>

            <!-- Monster Info Panel (Bottom Right - Above Hero) -->
            <div id="monster-info-panel" class="hidden">
                <div class="monster-header">
                    <div>
                        <h3 id="info-name">T√™n Qu√°i</h3>
                        <span id="info-type">Lo·∫°i</span>
                    </div>
                    <button onclick="deselectMonster()" class="btn-close-panel"><i class="fas fa-times"></i></button>
                </div>
                
                <div class="monster-hp-container">
                    <div class="monster-hp-text">
                        <span>HP</span> <span id="info-hp-text">0/0</span>
                    </div>
                    <div class="monster-hp-bar-bg">
                        <div id="info-hp-bar"></div>
                    </div>
                </div>

                <div class="stat-grid">
                    <div class="stat-box"><i class="fas fa-shield-alt text-gray-400"></i> <span id="info-armor">0</span></div>
                    <div class="stat-box"><i class="fas fa-magic text-purple-400"></i> <span id="info-mr">0%</span></div>
                    <div class="stat-box"><i class="fas fa-wind text-green-400"></i> <span id="info-speed">0</span></div>
                    <div class="stat-box"><i class="fas fa-coins text-yellow-400"></i> <span id="info-reward">0g</span></div>
                </div>

                <div class="monster-effects-container">
                    <div class="monster-effects-title">Hi·ªáu ·ª©ng</div>
                    <div id="info-effects"></div>
                </div>
            </div>

            <!-- Build Menu -->
            <div id="build-menu" class="game-menu hidden">
                <div class="menu-title">X√¢y D·ª±ng Th√°p</div>
                <div class="tower-grid">
                    <button class="btn-build" data-type="archer" data-cost="70">üèπ Cung <span class="cost">70G</span></button>
                    <button class="btn-build" data-type="mage" data-cost="90">üîÆ Ph√©p <span class="cost">90G</span></button>
                    <button class="btn-build" data-type="barracks" data-cost="70">üõ°Ô∏è L√≠nh <span class="cost">70G</span></button>
                    <button class="btn-build" data-type="cannon" data-cost="110">üí£ Ph√°o <span class="cost">110G</span></button>
                </div>
                <button class="btn-action btn-close" id="btn-close-build">ƒê√≥ng</button>
            </div>

            <!-- Upgrade Menu -->
            <div id="upgrade-panel" class="game-menu hidden">
                <div class="menu-title" id="tower-name">T√™n Th√°p</div>
                <div class="upgrade-stats" id="tower-info">...</div>
                <div id="branch-options"></div>
                <button class="btn-action btn-upgrade" id="btn-upgrade">‚¨ÜÔ∏è N√¢ng c·∫•p</button>
                <button class="btn-action btn-rally hidden" id="btn-rally">üö© ƒê·∫∑t v·ªã tr√≠ l√≠nh</button>
                <button class="btn-action btn-sell" id="btn-sell">üí∞ B√°n</button>
                <button class="btn-action btn-close" id="btn-close-upgrade">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <script type="module" src="./js/main.js"></script>
</body>
</html>